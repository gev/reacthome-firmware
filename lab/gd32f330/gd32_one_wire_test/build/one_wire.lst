ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"one_wire.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.one_wire_init,"ax",%progbits
  18              		.align	1
  19              		.global	one_wire_init
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	one_wire_init:
  25              	.LFB116:
  26              		.file 1 "src/one_wire.c"
   1:src/one_wire.c **** #include "one_wire.h"
   2:src/one_wire.c **** #include "gpio.h"
   3:src/one_wire.c **** #include "delay_us.h"
   4:src/one_wire.c **** 
   5:src/one_wire.c **** 
   6:src/one_wire.c **** #define TIME_RESET_US 480
   7:src/one_wire.c **** #define TIME_PRESENCE_FIRST_US 70
   8:src/one_wire.c **** #define TIME_PRESENCE_SECOND_US 410
   9:src/one_wire.c **** #define TIME_SEND_BIT_1_US 6
  10:src/one_wire.c **** #define TIME_SEND_BIT_1_PAUSE_US 64
  11:src/one_wire.c **** #define TIME_SEND_BIT_0_US 60
  12:src/one_wire.c **** #define TIME_SEND_BIT_0_PAUSE_US 10
  13:src/one_wire.c **** #define TIME_READ_BIT_US 9
  14:src/one_wire.c **** #define TIME_READ_BIT_PAUSE_US 55
  15:src/one_wire.c **** 
  16:src/one_wire.c **** extern pin one_wire, rede;
  17:src/one_wire.c **** 
  18:src/one_wire.c **** void one_wire_init() {
  27              		.loc 1 18 22 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 08B5     		push	{r3, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 3, -8
  35              		.cfi_offset 14, -4
  19:src/one_wire.c ****   pin_set(one_wire);
  36              		.loc 1 19 3 view .LVU1
  37 0002 034B     		ldr	r3, .L3
  38 0004 93E80300 		ldm	r3, {r0, r1}
  39 0008 FFF7FEFF 		bl	pin_set
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 2


  40              	.LVL0:
  20:src/one_wire.c **** }
  41              		.loc 1 20 1 is_stmt 0 view .LVU2
  42 000c 08BD     		pop	{r3, pc}
  43              	.L4:
  44 000e 00BF     		.align	2
  45              	.L3:
  46 0010 00000000 		.word	one_wire
  47              		.cfi_endproc
  48              	.LFE116:
  50              		.section	.text.one_wire_reset,"ax",%progbits
  51              		.align	1
  52              		.global	one_wire_reset
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  57              	one_wire_reset:
  58              	.LFB117:
  21:src/one_wire.c **** 
  22:src/one_wire.c **** uint8_t one_wire_reset() {
  59              		.loc 1 22 26 is_stmt 1 view -0
  60              		.cfi_startproc
  61              		@ args = 0, pretend = 0, frame = 0
  62              		@ frame_needed = 0, uses_anonymous_args = 0
  63 0000 10B5     		push	{r4, lr}
  64              	.LCFI1:
  65              		.cfi_def_cfa_offset 8
  66              		.cfi_offset 4, -8
  67              		.cfi_offset 14, -4
  23:src/one_wire.c ****   pin_reset(one_wire);
  68              		.loc 1 23 3 view .LVU4
  69 0002 114C     		ldr	r4, .L9
  70 0004 94E80300 		ldm	r4, {r0, r1}
  71 0008 FFF7FEFF 		bl	pin_reset
  72              	.LVL1:
  24:src/one_wire.c ****   delay_us(TIME_RESET_US);
  73              		.loc 1 24 3 view .LVU5
  74 000c 4FF4F070 		mov	r0, #480
  75 0010 FFF7FEFF 		bl	delay_us
  76              	.LVL2:
  25:src/one_wire.c ****   pin_set(one_wire);
  77              		.loc 1 25 3 view .LVU6
  78 0014 94E80300 		ldm	r4, {r0, r1}
  79 0018 FFF7FEFF 		bl	pin_set
  80              	.LVL3:
  26:src/one_wire.c ****   delay_us(TIME_PRESENCE_FIRST_US);
  81              		.loc 1 26 3 view .LVU7
  82 001c 4620     		movs	r0, #70
  83 001e FFF7FEFF 		bl	delay_us
  84              	.LVL4:
  27:src/one_wire.c ****   if (pin_get(one_wire) == 1) return 1;
  85              		.loc 1 27 3 view .LVU8
  86              		.loc 1 27 7 is_stmt 0 view .LVU9
  87 0022 94E80300 		ldm	r4, {r0, r1}
  88 0026 FFF7FEFF 		bl	pin_get
  89              	.LVL5:
  90              		.loc 1 27 6 view .LVU10
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 3


  91 002a 0128     		cmp	r0, #1
  92 002c 09D0     		beq	.L6
  28:src/one_wire.c ****   delay_us(TIME_PRESENCE_SECOND_US);
  93              		.loc 1 28 3 is_stmt 1 view .LVU11
  94 002e 4FF4CD70 		mov	r0, #410
  95 0032 FFF7FEFF 		bl	delay_us
  96              	.LVL6:
  29:src/one_wire.c ****   if (pin_get(one_wire) == 0) return 1;
  97              		.loc 1 29 3 view .LVU12
  98              		.loc 1 29 7 is_stmt 0 view .LVU13
  99 0036 D4E90001 		ldrd	r0, r1, [r4]
 100 003a FFF7FEFF 		bl	pin_get
 101              	.LVL7:
 102              		.loc 1 29 6 view .LVU14
 103 003e 08B1     		cbz	r0, .L7
  30:src/one_wire.c ****   return 0;
 104              		.loc 1 30 10 view .LVU15
 105 0040 0020     		movs	r0, #0
 106              	.L6:
  31:src/one_wire.c **** }
 107              		.loc 1 31 1 view .LVU16
 108 0042 10BD     		pop	{r4, pc}
 109              	.L7:
  29:src/one_wire.c ****   if (pin_get(one_wire) == 0) return 1;
 110              		.loc 1 29 38 view .LVU17
 111 0044 0120     		movs	r0, #1
 112 0046 FCE7     		b	.L6
 113              	.L10:
 114              		.align	2
 115              	.L9:
 116 0048 00000000 		.word	one_wire
 117              		.cfi_endproc
 118              	.LFE117:
 120              		.section	.text.one_wire_send_byte,"ax",%progbits
 121              		.align	1
 122              		.global	one_wire_send_byte
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 127              	one_wire_send_byte:
 128              	.LVL8:
 129              	.LFB118:
  32:src/one_wire.c **** 
  33:src/one_wire.c **** void one_wire_send_byte(uint8_t data) {
 130              		.loc 1 33 39 is_stmt 1 view -0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134              		.loc 1 33 39 is_stmt 0 view .LVU19
 135 0000 38B5     		push	{r3, r4, r5, lr}
 136              	.LCFI2:
 137              		.cfi_def_cfa_offset 16
 138              		.cfi_offset 3, -16
 139              		.cfi_offset 4, -12
 140              		.cfi_offset 5, -8
 141              		.cfi_offset 14, -4
 142 0002 0546     		mov	r5, r0
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 4


  34:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 143              		.loc 1 34 3 is_stmt 1 view .LVU20
 144              	.LBB2:
 145              		.loc 1 34 8 view .LVU21
 146              	.LVL9:
 147              		.loc 1 34 16 is_stmt 0 view .LVU22
 148 0004 0024     		movs	r4, #0
 149              		.loc 1 34 3 view .LVU23
 150 0006 0DE0     		b	.L12
 151              	.LVL10:
 152              	.L13:
  35:src/one_wire.c ****     pin_reset(one_wire);
  36:src/one_wire.c ****     if (0 < (data & 1)) {
  37:src/one_wire.c ****       delay_us(TIME_SEND_BIT_1_US);
  38:src/one_wire.c ****       pin_set(one_wire);
  39:src/one_wire.c ****       delay_us(TIME_SEND_BIT_1_PAUSE_US);
  40:src/one_wire.c ****     } else {
  41:src/one_wire.c ****       delay_us(TIME_SEND_BIT_0_US);
 153              		.loc 1 41 7 is_stmt 1 view .LVU24
 154 0008 3C20     		movs	r0, #60
 155 000a FFF7FEFF 		bl	delay_us
 156              	.LVL11:
  42:src/one_wire.c ****       pin_set(one_wire);
 157              		.loc 1 42 7 view .LVU25
 158 000e 114B     		ldr	r3, .L18
 159 0010 93E80300 		ldm	r3, {r0, r1}
 160 0014 FFF7FEFF 		bl	pin_set
 161              	.LVL12:
  43:src/one_wire.c ****       delay_us(TIME_SEND_BIT_0_PAUSE_US);
 162              		.loc 1 43 7 view .LVU26
 163 0018 0A20     		movs	r0, #10
 164 001a FFF7FEFF 		bl	delay_us
 165              	.LVL13:
 166              	.L14:
  44:src/one_wire.c ****     }
  45:src/one_wire.c ****     data >>= 1;
 167              		.loc 1 45 5 discriminator 2 view .LVU27
 168              		.loc 1 45 10 is_stmt 0 discriminator 2 view .LVU28
 169 001e 6D08     		lsrs	r5, r5, #1
 170              	.LVL14:
  34:src/one_wire.c ****     pin_reset(one_wire);
 171              		.loc 1 34 34 is_stmt 1 discriminator 2 view .LVU29
  34:src/one_wire.c ****     pin_reset(one_wire);
 172              		.loc 1 34 37 is_stmt 0 discriminator 2 view .LVU30
 173 0020 0134     		adds	r4, r4, #1
 174              	.LVL15:
  34:src/one_wire.c ****     pin_reset(one_wire);
 175              		.loc 1 34 37 discriminator 2 view .LVU31
 176 0022 E4B2     		uxtb	r4, r4
 177              	.LVL16:
 178              	.L12:
  34:src/one_wire.c ****     pin_reset(one_wire);
 179              		.loc 1 34 25 is_stmt 1 discriminator 1 view .LVU32
  34:src/one_wire.c ****     pin_reset(one_wire);
 180              		.loc 1 34 3 is_stmt 0 discriminator 1 view .LVU33
 181 0024 072C     		cmp	r4, #7
 182 0026 13D8     		bhi	.L17
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 5


  35:src/one_wire.c ****     if (0 < (data & 1)) {
 183              		.loc 1 35 5 is_stmt 1 view .LVU34
 184 0028 0A4B     		ldr	r3, .L18
 185 002a 93E80300 		ldm	r3, {r0, r1}
 186 002e FFF7FEFF 		bl	pin_reset
 187              	.LVL17:
  36:src/one_wire.c ****       delay_us(TIME_SEND_BIT_1_US);
 188              		.loc 1 36 5 view .LVU35
  36:src/one_wire.c ****       delay_us(TIME_SEND_BIT_1_US);
 189              		.loc 1 36 8 is_stmt 0 view .LVU36
 190 0032 15F0010F 		tst	r5, #1
 191 0036 E7D0     		beq	.L13
  37:src/one_wire.c ****       pin_set(one_wire);
 192              		.loc 1 37 7 is_stmt 1 view .LVU37
 193 0038 0620     		movs	r0, #6
 194 003a FFF7FEFF 		bl	delay_us
 195              	.LVL18:
  38:src/one_wire.c ****       delay_us(TIME_SEND_BIT_1_PAUSE_US);
 196              		.loc 1 38 7 view .LVU38
 197 003e 054B     		ldr	r3, .L18
 198 0040 93E80300 		ldm	r3, {r0, r1}
 199 0044 FFF7FEFF 		bl	pin_set
 200              	.LVL19:
  39:src/one_wire.c ****     } else {
 201              		.loc 1 39 7 view .LVU39
 202 0048 4020     		movs	r0, #64
 203 004a FFF7FEFF 		bl	delay_us
 204              	.LVL20:
 205 004e E6E7     		b	.L14
 206              	.L17:
 207              	.LBE2:
  46:src/one_wire.c ****   }
  47:src/one_wire.c **** }
 208              		.loc 1 47 1 is_stmt 0 view .LVU40
 209 0050 38BD     		pop	{r3, r4, r5, pc}
 210              	.LVL21:
 211              	.L19:
 212              		.loc 1 47 1 view .LVU41
 213 0052 00BF     		.align	2
 214              	.L18:
 215 0054 00000000 		.word	one_wire
 216              		.cfi_endproc
 217              	.LFE118:
 219              		.section	.text.one_wire_read_byte,"ax",%progbits
 220              		.align	1
 221              		.global	one_wire_read_byte
 222              		.syntax unified
 223              		.thumb
 224              		.thumb_func
 226              	one_wire_read_byte:
 227              	.LFB119:
  48:src/one_wire.c **** 
  49:src/one_wire.c **** uint8_t one_wire_read_byte(void) {
 228              		.loc 1 49 34 is_stmt 1 view -0
 229              		.cfi_startproc
 230              		@ args = 0, pretend = 0, frame = 0
 231              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 6


 232 0000 70B5     		push	{r4, r5, r6, lr}
 233              	.LCFI3:
 234              		.cfi_def_cfa_offset 16
 235              		.cfi_offset 4, -16
 236              		.cfi_offset 5, -12
 237              		.cfi_offset 6, -8
 238              		.cfi_offset 14, -4
  50:src/one_wire.c ****   uint8_t result = 0;
 239              		.loc 1 50 3 view .LVU43
 240              	.LVL22:
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 241              		.loc 1 51 3 view .LVU44
 242              	.LBB3:
 243              		.loc 1 51 8 view .LVU45
 244              		.loc 1 51 16 is_stmt 0 view .LVU46
 245 0002 0025     		movs	r5, #0
 246              	.LBE3:
  50:src/one_wire.c ****   uint8_t result = 0;
 247              		.loc 1 50 11 view .LVU47
 248 0004 2E46     		mov	r6, r5
 249              	.LBB4:
 250              		.loc 1 51 3 view .LVU48
 251 0006 04E0     		b	.L21
 252              	.LVL23:
 253              	.L22:
  52:src/one_wire.c ****     pin_reset(one_wire);
  53:src/one_wire.c ****     delay_us(TIME_SEND_BIT_1_US);
  54:src/one_wire.c ****     pin_set(one_wire);
  55:src/one_wire.c ****     delay_us(TIME_READ_BIT_US);
  56:src/one_wire.c ****     if (pin_get(one_wire) == 1)
  57:src/one_wire.c ****       result |= (1 << bit);
  58:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 254              		.loc 1 58 5 is_stmt 1 discriminator 2 view .LVU49
 255 0008 3720     		movs	r0, #55
 256 000a FFF7FEFF 		bl	delay_us
 257              	.LVL24:
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 258              		.loc 1 51 34 discriminator 2 view .LVU50
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 259              		.loc 1 51 37 is_stmt 0 discriminator 2 view .LVU51
 260 000e 0135     		adds	r5, r5, #1
 261              	.LVL25:
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 262              		.loc 1 51 37 discriminator 2 view .LVU52
 263 0010 EDB2     		uxtb	r5, r5
 264              	.LVL26:
 265              	.L21:
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 266              		.loc 1 51 25 is_stmt 1 discriminator 1 view .LVU53
  51:src/one_wire.c ****   for (uint8_t bit = 0; bit < 8; bit++) {
 267              		.loc 1 51 3 is_stmt 0 discriminator 1 view .LVU54
 268 0012 072D     		cmp	r5, #7
 269 0014 19D8     		bhi	.L25
  52:src/one_wire.c ****     pin_reset(one_wire);
 270              		.loc 1 52 5 is_stmt 1 view .LVU55
 271 0016 0E4C     		ldr	r4, .L26
 272 0018 94E80300 		ldm	r4, {r0, r1}
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 7


 273 001c FFF7FEFF 		bl	pin_reset
 274              	.LVL27:
  53:src/one_wire.c ****     pin_set(one_wire);
 275              		.loc 1 53 5 view .LVU56
 276 0020 0620     		movs	r0, #6
 277 0022 FFF7FEFF 		bl	delay_us
 278              	.LVL28:
  54:src/one_wire.c ****     delay_us(TIME_READ_BIT_US);
 279              		.loc 1 54 5 view .LVU57
 280 0026 94E80300 		ldm	r4, {r0, r1}
 281 002a FFF7FEFF 		bl	pin_set
 282              	.LVL29:
  55:src/one_wire.c ****     if (pin_get(one_wire) == 1)
 283              		.loc 1 55 5 view .LVU58
 284 002e 0920     		movs	r0, #9
 285 0030 FFF7FEFF 		bl	delay_us
 286              	.LVL30:
  56:src/one_wire.c ****       result |= (1 << bit);
 287              		.loc 1 56 5 view .LVU59
  56:src/one_wire.c ****       result |= (1 << bit);
 288              		.loc 1 56 9 is_stmt 0 view .LVU60
 289 0034 94E80300 		ldm	r4, {r0, r1}
 290 0038 FFF7FEFF 		bl	pin_get
 291              	.LVL31:
  56:src/one_wire.c ****       result |= (1 << bit);
 292              		.loc 1 56 8 view .LVU61
 293 003c 0128     		cmp	r0, #1
 294 003e E3D1     		bne	.L22
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 295              		.loc 1 57 7 is_stmt 1 view .LVU62
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 296              		.loc 1 57 20 is_stmt 0 view .LVU63
 297 0040 0123     		movs	r3, #1
 298 0042 AB40     		lsls	r3, r3, r5
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 299              		.loc 1 57 14 view .LVU64
 300 0044 1E43     		orrs	r6, r6, r3
 301              	.LVL32:
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 302              		.loc 1 57 14 view .LVU65
 303 0046 F6B2     		uxtb	r6, r6
 304              	.LVL33:
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 305              		.loc 1 57 14 view .LVU66
 306 0048 DEE7     		b	.L22
 307              	.L25:
  57:src/one_wire.c ****     delay_us(TIME_READ_BIT_PAUSE_US);
 308              		.loc 1 57 14 view .LVU67
 309              	.LBE4:
  59:src/one_wire.c ****   }
  60:src/one_wire.c ****   return result;
 310              		.loc 1 60 3 is_stmt 1 view .LVU68
  61:src/one_wire.c **** }...
 311              		.loc 1 61 1 is_stmt 0 view .LVU69
 312 004a 3046     		mov	r0, r6
 313 004c 70BD     		pop	{r4, r5, r6, pc}
 314              	.LVL34:
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 8


 315              	.L27:
 316              		.loc 1 61 1 view .LVU70
 317 004e 00BF     		.align	2
 318              	.L26:
 319 0050 00000000 		.word	one_wire
 320              		.cfi_endproc
 321              	.LFE119:
 323              		.text
 324              	.Letext0:
 325              		.file 2 "/Applications/ARM/arm-none-eabi/include/machine/_default_types.h"
 326              		.file 3 "/Applications/ARM/arm-none-eabi/include/sys/_stdint.h"
 327              		.file 4 "inc/delay_us.h"
 328              		.file 5 "inc/gpio.h"
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s 			page 9


DEFINED SYMBOLS
                            *ABS*:0000000000000000 one_wire.c
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:18     .text.one_wire_init:0000000000000000 $t
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:24     .text.one_wire_init:0000000000000000 one_wire_init
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:46     .text.one_wire_init:0000000000000010 $d
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:51     .text.one_wire_reset:0000000000000000 $t
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:57     .text.one_wire_reset:0000000000000000 one_wire_reset
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:116    .text.one_wire_reset:0000000000000048 $d
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:121    .text.one_wire_send_byte:0000000000000000 $t
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:127    .text.one_wire_send_byte:0000000000000000 one_wire_send_byte
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:215    .text.one_wire_send_byte:0000000000000054 $d
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:220    .text.one_wire_read_byte:0000000000000000 $t
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:226    .text.one_wire_read_byte:0000000000000000 one_wire_read_byte
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccvj3iwo.s:319    .text.one_wire_read_byte:0000000000000050 $d

UNDEFINED SYMBOLS
pin_set
one_wire
pin_reset
delay_us
pin_get
