ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"main.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.global	__aeabi_ui2f
  18              		.global	__aeabi_fmul
  19              		.section	.text.main,"ax",%progbits
  20              		.align	1
  21              		.global	main
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	main:
  27              	.LFB116:
  28              		.file 1 "src/main.c"
   1:src/main.c    **** #include <stdint.h>
   2:src/main.c    **** 
   3:src/main.c    **** #include "delay_us.h"
   4:src/main.c    **** #include "gd32f3x0.h"
   5:src/main.c    **** #include "gd32f3x0_gpio.h"
   6:src/main.c    **** #include "gd32f3x0_rcu.h"
   7:src/main.c    **** #include "gpio.h"
   8:src/main.c    **** #include "one_wire.h"
   9:src/main.c    **** 
  10:src/main.c    **** extern pin one_wire, rede;
  11:src/main.c    **** volatile float temperature;
  12:src/main.c    **** uint16_t tmp;
  13:src/main.c    **** 
  14:src/main.c    **** int main() {
  29              		.loc 1 14 12 view -0
  30              		.cfi_startproc
  31              		@ Volatile: function does not return.
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
  15:src/main.c    ****   rcu_periph_clock_enable(RCU_GPIOA);
  39              		.loc 1 15 3 view .LVU1
  40 0002 40F21150 		movw	r0, #1297
  41 0006 FFF7FEFF 		bl	rcu_periph_clock_enable
  42              	.LVL0:
  16:src/main.c    ****   rcu_periph_clock_enable(RCU_GPIOB);
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 2


  43              		.loc 1 16 3 view .LVU2
  44 000a 40F21250 		movw	r0, #1298
  45 000e FFF7FEFF 		bl	rcu_periph_clock_enable
  46              	.LVL1:
  17:src/main.c    **** 
  18:src/main.c    ****   delay_init();
  47              		.loc 1 18 3 view .LVU3
  48 0012 FFF7FEFF 		bl	delay_init
  49              	.LVL2:
  19:src/main.c    **** 
  20:src/main.c    ****   pin_init_out(rede);
  50              		.loc 1 20 3 view .LVU4
  51 0016 234C     		ldr	r4, .L7
  52 0018 94E80300 		ldm	r4, {r0, r1}
  53 001c FFF7FEFF 		bl	pin_init_out
  54              	.LVL3:
  21:src/main.c    ****   pin_reset(rede);
  55              		.loc 1 21 3 view .LVU5
  56 0020 94E80300 		ldm	r4, {r0, r1}
  57 0024 FFF7FEFF 		bl	pin_reset
  58              	.LVL4:
  22:src/main.c    **** 
  23:src/main.c    ****   pin_init_out_OD(one_wire);
  59              		.loc 1 23 3 view .LVU6
  60 0028 1F4C     		ldr	r4, .L7+4
  61 002a 94E80300 		ldm	r4, {r0, r1}
  62 002e FFF7FEFF 		bl	pin_init_out_OD
  63              	.LVL5:
  24:src/main.c    ****   pin_set(one_wire);
  64              		.loc 1 24 3 view .LVU7
  65 0032 94E80300 		ldm	r4, {r0, r1}
  66 0036 FFF7FEFF 		bl	pin_set
  67              	.LVL6:
  68 003a 07E0     		b	.L4
  69              	.L6:
  25:src/main.c    **** 
  26:src/main.c    ****   // while(1){
  27:src/main.c    ****   //   pin_set(one_wire);
  28:src/main.c    ****   //   delay_us(400);
  29:src/main.c    ****   //   pin_reset(one_wire);
  30:src/main.c    ****   //   delay_us(1000);
  31:src/main.c    ****   // }
  32:src/main.c    **** 
  33:src/main.c    ****   while (1) {
  34:src/main.c    ****     while (1) {
  35:src/main.c    ****       if (one_wire_reset() == 1) {
  36:src/main.c    ****         // pin_reset(one_wire);
  37:src/main.c    ****         break;
  38:src/main.c    ****       } else {
  39:src/main.c    ****         one_wire_send_byte(0xCC);
  40:src/main.c    ****         one_wire_send_byte(0x44);
  41:src/main.c    ****       }
  42:src/main.c    ****       delay_us(600000);
  43:src/main.c    ****       if (one_wire_reset() == 1) {
  44:src/main.c    ****         pin_reset(one_wire);
  70              		.loc 1 44 9 view .LVU8
  71 003c 1A4B     		ldr	r3, .L7+4
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 3


  72 003e 93E80300 		ldm	r3, {r0, r1}
  73 0042 FFF7FEFF 		bl	pin_reset
  74              	.LVL7:
  45:src/main.c    ****         break;
  75              		.loc 1 45 9 view .LVU9
  76              	.L2:
  46:src/main.c    ****       } else {
  47:src/main.c    ****         one_wire_send_byte(0xCC);
  48:src/main.c    ****         one_wire_send_byte(0xBE);
  49:src/main.c    ****         tmp = one_wire_read_byte();
  50:src/main.c    ****         tmp |= (uint16_t)(one_wire_read_byte()) << 8;
  51:src/main.c    ****         temperature = (float)tmp / 16;
  52:src/main.c    ****         break;
  53:src/main.c    ****       }
  54:src/main.c    ****     }
  55:src/main.c    ****     delay_us(400000);
  77              		.loc 1 55 5 view .LVU10
  78 0046 1948     		ldr	r0, .L7+8
  79 0048 FFF7FEFF 		bl	delay_us
  80              	.LVL8:
  33:src/main.c    ****     while (1) {
  81              		.loc 1 33 9 view .LVU11
  82              	.L4:
  33:src/main.c    ****     while (1) {
  83              		.loc 1 33 3 view .LVU12
  34:src/main.c    ****       if (one_wire_reset() == 1) {
  84              		.loc 1 34 5 view .LVU13
  35:src/main.c    ****         // pin_reset(one_wire);
  85              		.loc 1 35 7 view .LVU14
  35:src/main.c    ****         // pin_reset(one_wire);
  86              		.loc 1 35 11 is_stmt 0 view .LVU15
  87 004c FFF7FEFF 		bl	one_wire_reset
  88              	.LVL9:
  35:src/main.c    ****         // pin_reset(one_wire);
  89              		.loc 1 35 10 view .LVU16
  90 0050 0128     		cmp	r0, #1
  91 0052 F8D0     		beq	.L2
  39:src/main.c    ****         one_wire_send_byte(0x44);
  92              		.loc 1 39 9 is_stmt 1 view .LVU17
  93 0054 CC20     		movs	r0, #204
  94 0056 FFF7FEFF 		bl	one_wire_send_byte
  95              	.LVL10:
  40:src/main.c    ****       }
  96              		.loc 1 40 9 view .LVU18
  97 005a 4420     		movs	r0, #68
  98 005c FFF7FEFF 		bl	one_wire_send_byte
  99              	.LVL11:
  42:src/main.c    ****       if (one_wire_reset() == 1) {
 100              		.loc 1 42 7 view .LVU19
 101 0060 1348     		ldr	r0, .L7+12
 102 0062 FFF7FEFF 		bl	delay_us
 103              	.LVL12:
  43:src/main.c    ****         pin_reset(one_wire);
 104              		.loc 1 43 7 view .LVU20
  43:src/main.c    ****         pin_reset(one_wire);
 105              		.loc 1 43 11 is_stmt 0 view .LVU21
 106 0066 FFF7FEFF 		bl	one_wire_reset
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 4


 107              	.LVL13:
  43:src/main.c    ****         pin_reset(one_wire);
 108              		.loc 1 43 10 view .LVU22
 109 006a 0128     		cmp	r0, #1
 110 006c E6D0     		beq	.L6
  47:src/main.c    ****         one_wire_send_byte(0xBE);
 111              		.loc 1 47 9 is_stmt 1 view .LVU23
 112 006e CC20     		movs	r0, #204
 113 0070 FFF7FEFF 		bl	one_wire_send_byte
 114              	.LVL14:
  48:src/main.c    ****         tmp = one_wire_read_byte();
 115              		.loc 1 48 9 view .LVU24
 116 0074 BE20     		movs	r0, #190
 117 0076 FFF7FEFF 		bl	one_wire_send_byte
 118              	.LVL15:
  49:src/main.c    ****         tmp |= (uint16_t)(one_wire_read_byte()) << 8;
 119              		.loc 1 49 9 view .LVU25
  49:src/main.c    ****         tmp |= (uint16_t)(one_wire_read_byte()) << 8;
 120              		.loc 1 49 15 is_stmt 0 view .LVU26
 121 007a FFF7FEFF 		bl	one_wire_read_byte
 122              	.LVL16:
  49:src/main.c    ****         tmp |= (uint16_t)(one_wire_read_byte()) << 8;
 123              		.loc 1 49 13 view .LVU27
 124 007e 0D4C     		ldr	r4, .L7+16
 125 0080 2080     		strh	r0, [r4]	@ movhi
  50:src/main.c    ****         temperature = (float)tmp / 16;
 126              		.loc 1 50 9 is_stmt 1 view .LVU28
  50:src/main.c    ****         temperature = (float)tmp / 16;
 127              		.loc 1 50 27 is_stmt 0 view .LVU29
 128 0082 FFF7FEFF 		bl	one_wire_read_byte
 129              	.LVL17:
  50:src/main.c    ****         temperature = (float)tmp / 16;
 130              		.loc 1 50 13 view .LVU30
 131 0086 2388     		ldrh	r3, [r4]
 132 0088 43EA0020 		orr	r0, r3, r0, lsl #8
 133 008c 80B2     		uxth	r0, r0
 134 008e 2080     		strh	r0, [r4]	@ movhi
  51:src/main.c    ****         break;
 135              		.loc 1 51 9 is_stmt 1 view .LVU31
  51:src/main.c    ****         break;
 136              		.loc 1 51 23 is_stmt 0 view .LVU32
 137 0090 FFF7FEFF 		bl	__aeabi_ui2f
 138              	.LVL18:
  51:src/main.c    ****         break;
 139              		.loc 1 51 34 view .LVU33
 140 0094 4FF07651 		mov	r1, #1031798784
 141 0098 FFF7FEFF 		bl	__aeabi_fmul
 142              	.LVL19:
  51:src/main.c    ****         break;
 143              		.loc 1 51 21 view .LVU34
 144 009c 064B     		ldr	r3, .L7+20
 145 009e 1860     		str	r0, [r3]	@ float
  52:src/main.c    ****       }
 146              		.loc 1 52 9 is_stmt 1 view .LVU35
 147 00a0 D1E7     		b	.L2
 148              	.L8:
 149 00a2 00BF     		.align	2
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 5


 150              	.L7:
 151 00a4 00000000 		.word	rede
 152 00a8 00000000 		.word	one_wire
 153 00ac 801A0600 		.word	400000
 154 00b0 C0270900 		.word	600000
 155 00b4 00000000 		.word	.LANCHOR0
 156 00b8 00000000 		.word	.LANCHOR1
 157              		.cfi_endproc
 158              	.LFE116:
 160              		.global	tmp
 161              		.global	temperature
 162              		.section	.bss.temperature,"aw",%nobits
 163              		.align	2
 164              		.set	.LANCHOR1,. + 0
 167              	temperature:
 168 0000 00000000 		.space	4
 169              		.section	.bss.tmp,"aw",%nobits
 170              		.align	1
 171              		.set	.LANCHOR0,. + 0
 174              	tmp:
 175 0000 0000     		.space	2
 176              		.text
 177              	.Letext0:
 178              		.file 2 "/Applications/ARM/arm-none-eabi/include/machine/_default_types.h"
 179              		.file 3 "/Applications/ARM/arm-none-eabi/include/sys/_stdint.h"
 180              		.file 4 "lib/GD32F3x0/Include/gd32f3x0_dbg.h"
 181              		.file 5 "lib/GD32F3x0/Include/gd32f3x0_rcu.h"
 182              		.file 6 "inc/delay_us.h"
 183              		.file 7 "inc/gpio.h"
 184              		.file 8 "inc/one_wire.h"
ARM GAS  /var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s 			page 6


DEFINED SYMBOLS
                            *ABS*:0000000000000000 main.c
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:20     .text.main:0000000000000000 $t
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:26     .text.main:0000000000000000 main
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:151    .text.main:00000000000000a4 $d
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:174    .bss.tmp:0000000000000000 tmp
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:167    .bss.temperature:0000000000000000 temperature
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:163    .bss.temperature:0000000000000000 $d
/var/folders/_f/88qcw_5n2jl40jjphvxyt7wh0000gn/T//ccuKSwNy.s:170    .bss.tmp:0000000000000000 $d

UNDEFINED SYMBOLS
__aeabi_ui2f
__aeabi_fmul
rcu_periph_clock_enable
delay_init
pin_init_out
pin_reset
pin_init_out_OD
pin_set
delay_us
one_wire_reset
one_wire_send_byte
one_wire_read_byte
rede
one_wire
